<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@solana/options | Solana JavaScript SDK</title><meta name="description" content="Documentation for Solana JavaScript SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Solana JavaScript SDK</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Solana JavaScript SDK</a></li><li><a href="_solana_options.html">@solana/options</a></li></ul><h1>Module @solana/options</h1></div><section class="tsd-panel tsd-typography"><p><a href="https://www.npmjs.com/package/@solana/options/v/rc" target="_blank" class="external"><img src="https://img.shields.io/npm/v/@solana/options/rc.svg?style=flat" alt="npm"></a>
<a href="https://www.npmjs.com/package/@solana/options/v/rc" target="_blank" class="external"><img src="https://img.shields.io/npm/dm/@solana/options/rc.svg?style=flat" alt="npm-downloads"></a>
<br />
<a href="https://github.com/prettier/prettier" target="_blank" class="external"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" alt="code-style-prettier"></a></p>
<a id="md:solanaoptions" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@solana/options<a href="#md:solanaoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This package allows us to manage and serialize Rust-like Option types in JavaScript. It can be used standalone, but it is also exported as part of the Solana JavaScript SDK <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/library" target="_blank" class="external"><code>@solana/web3.js@rc</code></a>.</p>
<p>This package is also part of the <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external"><code>@solana/codecs</code> package</a> which acts as an entry point for all codec packages as well as for their documentation.</p>
<a id="md:creating-options" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Creating options<a href="#md:creating-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In Rust, we define optional values as an <code>Option&lt;T&gt;</code> type which can either be <code>Some(T)</code> or <code>None</code>. This is usually represented as <code>T | null</code> in the JavaScript world. The issue with this approach is it doesn't work with nested options. For instance, an <code>Option&lt;Option&lt;T&gt;&gt;</code> in Rust would become a <code>T | null | null</code> in JavaScript which is equivalent to <code>T | null</code>. That means, there is no way for us to represent the <code>Some(None)</code> value in JavaScript or any other nested option.</p>
<p>To solve this issue, this library provides an <code>Option&lt;T&gt;</code> union type that works very similarly to the Rust <code>Option&lt;T&gt;</code> type. It is defined as follows:</p>
<pre><code class="ts"><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">Option</span><span class="hl-1">&lt;</span><span class="hl-14">T</span><span class="hl-1">&gt; = </span><span class="hl-14">Some</span><span class="hl-1">&lt;</span><span class="hl-14">T</span><span class="hl-1">&gt; | </span><span class="hl-14">None</span><span class="hl-1">;</span><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">Some</span><span class="hl-1">&lt;</span><span class="hl-14">T</span><span class="hl-1">&gt; = { </span><span class="hl-11">__option</span><span class="hl-1">: </span><span class="hl-2">&#39;Some&#39;</span><span class="hl-1">; </span><span class="hl-11">value</span><span class="hl-1">: </span><span class="hl-14">T</span><span class="hl-1"> };</span><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">None</span><span class="hl-1"> = { </span><span class="hl-11">__option</span><span class="hl-1">: </span><span class="hl-2">&#39;None&#39;</span><span class="hl-1"> };</span>
</code><button type="button">Copy</button></pre>

<p>To improve the developer experience, helper functions are available to help you create options. The type <code>T</code> of the option can either be inferred by TypeScript or explicitly provided.</p>
<pre><code class="ts"><span class="hl-4">// Create an option with a value.</span><br/><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">some</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1"> | </span><span class="hl-14">string</span><span class="hl-1">&gt;(</span><span class="hl-13">123</span><span class="hl-1">);</span><br/><br/><span class="hl-4">// Create an empty option.</span><br/><span class="hl-0">none</span><span class="hl-1">();</span><br/><span class="hl-0">none</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1"> | </span><span class="hl-14">string</span><span class="hl-1">&gt;();</span>
</code><button type="button">Copy</button></pre>

<a id="md:option-helpers" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Option helpers<a href="#md:option-helpers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This library also provides helper functions to help us identify and manage <code>Option</code> types.</p>
<p>For instance, you can use the <code>isSome</code> and <code>isNone</code> type guards to check whether a given <code>Option</code> is of the desired type.</p>
<pre><code class="ts"><span class="hl-0">isSome</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">)); </span><span class="hl-4">// true</span><br/><span class="hl-0">isSome</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// false</span><br/><br/><span class="hl-0">isNone</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">)); </span><span class="hl-4">// false</span><br/><span class="hl-0">isNone</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// true</span>
</code><button type="button">Copy</button></pre>

<p>If you are given a type <code>T | null</code>, you may also use the <code>wrapNullable</code> helper function to transform it into an <code>Option&lt;T&gt;</code> type.</p>
<pre><code class="ts"><span class="hl-0">wrapNullable</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello world&#39;</span><span class="hl-1">); </span><span class="hl-4">// Some&lt;string&gt;</span><br/><span class="hl-0">wrapNullable</span><span class="hl-1">(</span><span class="hl-3">null</span><span class="hl-1">); </span><span class="hl-4">// None</span>
</code><button type="button">Copy</button></pre>

<a id="md:unwrapping-options" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Unwrapping options<a href="#md:unwrapping-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Several helpers are available to help you unwrap your options and access their potential value. For instance, the <code>unwrapOption</code> function transforms an <code>Option&lt;T&gt;</code> type into <code>T</code> if the value exits and <code>null</code> otherwise.</p>
<pre><code class="ts"><span class="hl-0">unwrapOption</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">)); </span><span class="hl-4">// &quot;Hello World&quot;</span><br/><span class="hl-0">unwrapOption</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// null</span>
</code><button type="button">Copy</button></pre>

<p>If <code>null</code> isnâ€™t the value you want to use for <code>None</code> options, you may provide a custom fallback function as the second argument. Its return value will be assigned to <code>None</code> options.</p>
<pre><code class="ts"><span class="hl-0">unwrapOption</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">), () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-2">&#39;Default&#39;</span><span class="hl-1">); </span><span class="hl-4">// &quot;Hello World&quot;</span><br/><span class="hl-0">unwrapOption</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">(), () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-2">&#39;Default&#39;</span><span class="hl-1">); </span><span class="hl-4">// &quot;Default&quot;</span>
</code><button type="button">Copy</button></pre>

<p>Note that this <code>unwrapOption</code> function does not recursively unwrap nested options. You may use the <code>unwrapOptionRecursively</code> function for that purpose instead.</p>
<pre><code class="ts"><span class="hl-0">unwrapOptionRecursively</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello World&#39;</span><span class="hl-1">)))); </span><span class="hl-4">// &quot;Hello World&quot;</span><br/><span class="hl-0">unwrapOptionRecursively</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">&lt;</span><span class="hl-14">string</span><span class="hl-1">&gt;()))); </span><span class="hl-4">// null</span>
</code><button type="button">Copy</button></pre>

<p>The <code>unwrapOptionRecursively</code> function also walks any object and array it encounters and recursively unwraps any option it identifies in its journey without mutating any object or array.</p>
<pre><code class="ts"><span class="hl-0">unwrapOptionRecursively</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-11">a:</span><span class="hl-1"> </span><span class="hl-2">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-11">b:</span><span class="hl-1"> </span><span class="hl-0">none</span><span class="hl-1">(),</span><br/><span class="hl-1">    </span><span class="hl-11">c:</span><span class="hl-1"> [{ </span><span class="hl-11">c1:</span><span class="hl-1"> </span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">) }, { </span><span class="hl-11">c2:</span><span class="hl-1"> </span><span class="hl-0">none</span><span class="hl-1">() }],</span><br/><span class="hl-1">});</span><br/><span class="hl-4">// { a: &quot;hello&quot;, b: null, c: [{ c1: 42 }, { c2: null }] }</span>
</code><button type="button">Copy</button></pre>

<p>The <code>unwrapOptionRecursively</code> also accepts a fallback function as a second argument to provide custom values for <code>None</code> options.</p>
<pre><code class="ts"><span class="hl-0">unwrapOptionRecursively</span><span class="hl-1">(</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-11">a:</span><span class="hl-1"> </span><span class="hl-2">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-11">b:</span><span class="hl-1"> </span><span class="hl-0">none</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-11">c:</span><span class="hl-1"> [{ </span><span class="hl-11">c1:</span><span class="hl-1"> </span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">) }, { </span><span class="hl-11">c2:</span><span class="hl-1"> </span><span class="hl-0">none</span><span class="hl-1">() }],</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-2">&#39;Default&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">);</span><br/><span class="hl-4">// { a: &quot;hello&quot;, b: &quot;Default&quot;, c: [{ c1: 42 }, { c2: &quot;Default&quot; }] }</span>
</code><button type="button">Copy</button></pre>

<a id="md:option-codec" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Option codec<a href="#md:option-codec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>getOptionCodec</code> function behaves exactly the same as the <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs-data-structures#nullable-codec" target="_blank" class="external"><code>getNullableCodec</code></a> except that it encodes <code>Option&lt;T&gt;</code> types instead of <code>T | null</code> types.</p>
<p>Namely, it accepts a codec of type <code>T</code> and returns a codec of type <code>Option&lt;T&gt;</code>. Note that, when encoding, <code>T</code> or <code>null</code> may also be provided directly as input and will be interpreted as <code>Some(T)</code> or <code>None</code> respectively. However, when decoding, the output will always be an <code>Option&lt;T&gt;</code> type.</p>
<p>It stores whether or not the item exists as a boolean prefix using a <code>u8</code> by default.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">stringCodec</span><span class="hl-1"> = </span><span class="hl-0">addCodecSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-0">getU32Codec</span><span class="hl-1">());</span><br/><br/><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-11">stringCodec</span><span class="hl-1">).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;Hi&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-11">stringCodec</span><span class="hl-1">).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hi&#39;</span><span class="hl-1">));</span><br/><span class="hl-4">// 0x01020000004869</span><br/><span class="hl-4">//   | |       â””-- utf8 string content (&quot;Hi&quot;).</span><br/><span class="hl-4">//   | â””-- u32 string prefix (2 characters).</span><br/><span class="hl-4">//   â””-- 1-byte prefix (Some).</span><br/><br/><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-11">stringCodec</span><span class="hl-1">).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-3">null</span><span class="hl-1">);</span><br/><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-11">stringCodec</span><span class="hl-1">).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">());</span><br/><span class="hl-4">// 0x00</span><br/><span class="hl-4">//   â””-- 1-byte prefix (None).</span>
</code><button type="button">Copy</button></pre>

<p>You may provide a number codec as the <code>prefix</code> option of the <code>getOptionCodec</code> function to configure how to store the boolean prefix.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32OptionStringCodec</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-11">stringCodec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-11">prefix:</span><span class="hl-1"> </span><span class="hl-0">getU32Codec</span><span class="hl-1">(),</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-11">u32OptionStringCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hi&#39;</span><span class="hl-1">));</span><br/><span class="hl-4">// 0x01000000020000004869</span><br/><span class="hl-4">//   â””------â”˜ 4-byte prefix (Some).</span><br/><br/><span class="hl-11">u32OptionStringCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">());</span><br/><span class="hl-4">// 0x00000000</span><br/><span class="hl-4">//   â””------â”˜ 4-byte prefix (None).</span>
</code><button type="button">Copy</button></pre>

<p>Additionally, if the item is a <code>FixedSizeCodec</code>, you may set the <code>noneValue</code> option to <code>&quot;zeroes&quot;</code> to also make the returned Option codec a <code>FixedSizeCodec</code>. To do so, it will pad <code>None</code> values with zeroes to match the length of existing values.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codec</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">fixCodecSize</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-13">8</span><span class="hl-1">), </span><span class="hl-4">// Only works with fixed-size items.</span><br/><span class="hl-1">    { </span><span class="hl-11">noneValue:</span><span class="hl-1"> </span><span class="hl-2">&#39;zeroes&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hi&#39;</span><span class="hl-1">));</span><br/><span class="hl-4">// 0x014869000000000000</span><br/><span class="hl-4">//   | â””-- 8-byte utf8 string content (&quot;Hi&quot;).</span><br/><span class="hl-4">//   â””-- 1-byte prefix (Some).</span><br/><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">());</span><br/><span class="hl-4">// 0x000000000000000000</span><br/><span class="hl-4">//   | â””-- 8-byte of padding to make a fixed-size codec.</span><br/><span class="hl-4">//   â””-- 1-byte prefix (None).</span>
</code><button type="button">Copy</button></pre>

<p>The <code>noneValue</code> option can also be set to an explicit byte array to use as the padding for <code>None</code> values. Note that, in this case, the returned codec will not be a <code>FixedSizeCodec</code> as the byte array representing <code>None</code> values may be of any length.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codec</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), {</span><br/><span class="hl-1">    </span><span class="hl-11">noneValue:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">255</span><span class="hl-1">]), </span><span class="hl-4">// 0xff means None.</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-2">&#39;Hi&#39;</span><span class="hl-1">));</span><br/><span class="hl-4">// 0x014869</span><br/><span class="hl-4">//   | â””-- 2-byte utf8 string content (&quot;Hi&quot;).</span><br/><span class="hl-4">//   â””-- 1-byte prefix (Some).</span><br/><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">());</span><br/><span class="hl-4">// 0x00ff</span><br/><span class="hl-4">//   | â””-- 1-byte representing None (0xff).</span><br/><span class="hl-4">//   â””-- 1-byte prefix (None).</span>
</code><button type="button">Copy</button></pre>

<p>Last but not least, the <code>prefix</code> option of the <code>getOptionCodec</code> function can also be set to <code>null</code>, meaning no prefix will be used to determine whether the item exists. In this case, the codec will rely on the <code>noneValue</code> option to determine whether the item is <code>None</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codecWithZeroNoneValue</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-0">getU16Codec</span><span class="hl-1">(), {</span><br/><span class="hl-1">    </span><span class="hl-11">noneValue:</span><span class="hl-1"> </span><span class="hl-2">&#39;zeroes&#39;</span><span class="hl-1">, </span><span class="hl-4">// 0x0000 means None.</span><br/><span class="hl-1">    </span><span class="hl-11">prefix:</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">codecWithZeroNoneValue</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">)); </span><span class="hl-4">// 0x2a00</span><br/><span class="hl-11">codecWithZeroNoneValue</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// 0x0000</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codecWithCustomNoneValue</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-0">getU16Codec</span><span class="hl-1">(), {</span><br/><span class="hl-1">    </span><span class="hl-11">noneValue:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">255</span><span class="hl-1">]), </span><span class="hl-4">// 0xff means None.</span><br/><span class="hl-1">    </span><span class="hl-11">prefix:</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">codecWithCustomNoneValue</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">)); </span><span class="hl-4">// 0x2a00</span><br/><span class="hl-11">codecWithCustomNoneValue</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// 0xff</span>
</code><button type="button">Copy</button></pre>

<p>Finally, note that if <code>prefix</code> is set to <code>null</code> and no <code>noneValue</code> is provided, the codec assume that the item exists if and only if some remaining bytes are available to decode. This could be useful to describe data structures that may or may not have additional data to the end of the buffer.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codec</span><span class="hl-1"> = </span><span class="hl-0">getOptionCodec</span><span class="hl-1">(</span><span class="hl-0">getU16Codec</span><span class="hl-1">(), { </span><span class="hl-11">prefix:</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1"> });</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">)); </span><span class="hl-4">// 0x2a00</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">none</span><span class="hl-1">()); </span><span class="hl-4">// Encodes nothing.</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">42</span><span class="hl-1">, </span><span class="hl-13">0</span><span class="hl-1">])); </span><span class="hl-4">// some(42)</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([])); </span><span class="hl-4">// none()</span>
</code><button type="button">Copy</button></pre>

<p>To recap, here are all the possible configurations of the <code>getOptionCodec</code> function, using a <code>u16</code> codec as an example.</p>
<table>
<thead>
<tr>
<th><code>encode(some(42))</code> / <code>encode(none())</code></th>
<th>No <code>noneValue</code> (default)</th>
<th><code>noneValue: &quot;zeroes&quot;</code></th>
<th>Custom <code>noneValue</code> (<code>0xff</code>)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>u8</code> prefix (default)</td>
<td><code>0x012a00</code> / <code>0x00</code></td>
<td><code>0x012a00</code> / <code>0x000000</code></td>
<td><code>0x012a00</code> / <code>0x00ff</code></td>
</tr>
<tr>
<td>Custom <code>prefix</code> (<code>u16</code>)</td>
<td><code>0x01002a00</code> / <code>0x0000</code></td>
<td><code>0x01002a00</code> / <code>0x00000000</code></td>
<td><code>0x01002a00</code> / <code>0x0000ff</code></td>
</tr>
<tr>
<td>No <code>prefix</code></td>
<td><code>0x2a00</code> / <code>0x</code></td>
<td><code>0x2a00</code> / <code>0x0000</code></td>
<td><code>0x2a00</code> / <code>0xff</code></td>
</tr>
</tbody>
</table>
<p>Separate <code>getOptionEncoder</code> and <code>getOptionDecoder</code> functions are also available.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytes</span><span class="hl-1"> = </span><span class="hl-0">getOptionEncoder</span><span class="hl-1">(</span><span class="hl-0">getU32Encoder</span><span class="hl-1">()).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">));</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-0">getOptionDecoder</span><span class="hl-1">(</span><span class="hl-0">getU32Decoder</span><span class="hl-1">()).</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>To read more about the available codecs and how to use them, check out the documentation of the main <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external"><code>@solana/codecs</code> package</a>.</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Modules</h3><div class="tsd-index-list"><a href="_solana_options._internal_.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2"></use></svg><span>&lt;internal&gt;</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Type Aliases</h3><div class="tsd-index-list"><a href="../types/_solana_options.None.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>None</span></a>
<a href="../types/_solana_options.Option.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Option</span></a>
<a href="../types/_solana_options.OptionCodecConfig.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Option<wbr/>Codec<wbr/>Config</span></a>
<a href="../types/_solana_options.OptionOrNullable.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Option<wbr/>Or<wbr/>Nullable</span></a>
<a href="../types/_solana_options.Some.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Some</span></a>
<a href="../types/_solana_options.UnwrappedOption.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Unwrapped<wbr/>Option</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/_solana_options.getOptionCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>get<wbr/>Option<wbr/>Codec</span></a>
<a href="../functions/_solana_options.getOptionDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>get<wbr/>Option<wbr/>Decoder</span></a>
<a href="../functions/_solana_options.getOptionEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>get<wbr/>Option<wbr/>Encoder</span></a>
<a href="../functions/_solana_options.isNone.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>is<wbr/>None</span></a>
<a href="../functions/_solana_options.isOption.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>is<wbr/>Option</span></a>
<a href="../functions/_solana_options.isSome.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>is<wbr/>Some</span></a>
<a href="../functions/_solana_options.none-1.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>none</span></a>
<a href="../functions/_solana_options.some-1.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>some</span></a>
<a href="../functions/_solana_options.unwrapOption.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>unwrap<wbr/>Option</span></a>
<a href="../functions/_solana_options.unwrapOptionRecursively.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>unwrap<wbr/>Option<wbr/>Recursively</span></a>
<a href="../functions/_solana_options.wrapNullable.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>wrap<wbr/>Nullable</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:solanaoptions"><span>@solana/options</span></a><ul><li><a href="#md:creating-options"><span>Creating options</span></a></li><li><a href="#md:option-helpers"><span>Option helpers</span></a></li><li><a href="#md:unwrapping-options"><span>Unwrapping options</span></a></li><li><a href="#md:option-codec"><span>Option codec</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Solana JavaScript SDK</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
