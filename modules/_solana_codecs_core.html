<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@solana/codecs-core | Solana JavaScript SDK</title><meta name="description" content="Documentation for Solana JavaScript SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Solana JavaScript SDK</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Solana JavaScript SDK</a></li><li><a href="_solana_codecs_core.html">@solana/codecs-core</a></li></ul><h1>Module @solana/codecs-core</h1></div><section class="tsd-panel tsd-typography"><p><a href="https://www.npmjs.com/package/@solana/codecs-core/v/rc" target="_blank" class="external"><img src="https://img.shields.io/npm/v/@solana/codecs-core/rc.svg?style=flat" alt="npm"></a>
<a href="https://www.npmjs.com/package/@solana/codecs-core/v/rc" target="_blank" class="external"><img src="https://img.shields.io/npm/dm/@solana/codecs-core/rc.svg?style=flat" alt="npm-downloads"></a>
<br />
<a href="https://github.com/prettier/prettier" target="_blank" class="external"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" alt="code-style-prettier"></a></p>
<a id="md:solanacodecs-core" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@solana/codecs-core<a href="#md:solanacodecs-core" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This package contains the core types and functions for encoding and decoding data structures on Solana. It can be used standalone, but it is also exported as part of the Solana JavaScript SDK <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/library" target="_blank" class="external"><code>@solana/web3.js@rc</code></a>.</p>
<p>This package is also part of the <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external"><code>@solana/codecs</code> package</a> which acts as an entry point for all codec packages as well as for their documentation.</p>
<a id="md:composing-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Composing codecs<a href="#md:composing-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The easiest way to create your own codecs is to compose the <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external">various codecs</a> offered by this library. For instance, here’s how you would define a codec for a <code>Person</code> object that contains a <code>name</code> string attribute and an <code>age</code> number stored in 4 bytes.</p>
<pre><code class="ts"><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">Person</span><span class="hl-1"> = { </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">; </span><span class="hl-11">age</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1"> };</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">getStructCodec</span><span class="hl-1">([</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">addCodecSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-0">getU32Codec</span><span class="hl-1">())],</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">, </span><span class="hl-0">getU32Codec</span><span class="hl-1">()],</span><br/><span class="hl-1">    ]);</span>
</code><button type="button">Copy</button></pre>

<p>This function returns a <code>Codec</code> object which contains both an <code>encode</code> and <code>decode</code> function that can be used to convert a <code>Person</code> type to and from a <code>Uint8Array</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">personCodec</span><span class="hl-1"> = </span><span class="hl-0">getPersonCodec</span><span class="hl-1">();</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytes</span><span class="hl-1"> = </span><span class="hl-11">personCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">({ </span><span class="hl-11">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John&#39;</span><span class="hl-1">, </span><span class="hl-11">age:</span><span class="hl-1"> </span><span class="hl-13">42</span><span class="hl-1"> });</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">person</span><span class="hl-1"> = </span><span class="hl-11">personCodec</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>There is a significant library of composable codecs at your disposal, enabling you to compose complex types. You may be interested in the documentation of these other packages to learn more about them:</p>
<ul>
<li><a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs-numbers" target="_blank" class="external"><code>@solana/codecs-numbers</code></a> for number codecs.</li>
<li><a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs-strings" target="_blank" class="external"><code>@solana/codecs-strings</code></a> for string codecs.</li>
<li><a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs-data-structures" target="_blank" class="external"><code>@solana/codecs-data-structures</code></a> for many data structure codecs such as objects, arrays, tuples, sets, maps, enums, discriminated unions, booleans, etc.</li>
<li><a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/options" target="_blank" class="external"><code>@solana/options</code></a> for a Rust-like <code>Option</code> type and associated codec.</li>
</ul>
<p>You may also be interested in some of the helpers of this <code>@solana/codecs-core</code> library such as <code>transformCodec</code>, <code>fixCodecSize</code> or <code>reverseCodec</code> that create new codecs from existing ones.</p>
<p>Note that all of these libraries are included in the <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external"><code>@solana/codecs</code> package</a> as well as the main <code>@solana/web3.js</code> package for your convenience.</p>
<a id="md:composing-encoders-and-decoders" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Composing encoders and decoders<a href="#md:composing-encoders-and-decoders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Whilst Codecs can both encode and decode, it is possible to only focus on encoding or decoding data, enabling the unused logic to be tree-shaken. For instance, here’s our previous example using Encoders only to encode a <code>Person</code> type.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonEncoder</span><span class="hl-1"> = (): </span><span class="hl-14">Encoder</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">getStructEncoder</span><span class="hl-1">([</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">addEncoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Encoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Encoder</span><span class="hl-1">())],</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">, </span><span class="hl-0">getU32Encoder</span><span class="hl-1">()],</span><br/><span class="hl-1">    ]);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytes</span><span class="hl-1"> = </span><span class="hl-0">getPersonEncoder</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">({ </span><span class="hl-11">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John&#39;</span><span class="hl-1">, </span><span class="hl-11">age:</span><span class="hl-1"> </span><span class="hl-13">42</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<p>The same can be done for decoding the <code>Person</code> type by using Decoders like so.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonDecoder</span><span class="hl-1"> = (): </span><span class="hl-14">Decoder</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">getStructDecoder</span><span class="hl-1">([</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">addDecoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Decoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Decoder</span><span class="hl-1">())],</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">, </span><span class="hl-0">getU32Decoder</span><span class="hl-1">()],</span><br/><span class="hl-1">    ]);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">person</span><span class="hl-1"> = </span><span class="hl-0">getPersonDecoder</span><span class="hl-1">().</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:combining-encoders-and-decoders" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Combining encoders and decoders<a href="#md:combining-encoders-and-decoders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Separating Codecs into Encoders and Decoders is particularly good practice for library maintainers as it allows their users to tree-shake any of the encoders and/or decoders they don’t need. However, we may still want to offer a codec helper for users who need both for convenience.</p>
<p>That’s why this library offers a <code>combineCodec</code> helper that creates a <code>Codec</code> instance from a matching <code>Encoder</code> and <code>Decoder</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getPersonEncoder</span><span class="hl-1">(), </span><span class="hl-0">getPersonDecoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<p>This means library maintainers can offer Encoders, Decoders and Codecs for all their types whilst staying efficient and tree-shakeable. In summary, we recommend the following pattern when creating codecs for library types.</p>
<pre><code class="ts"><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">MyType</span><span class="hl-1"> = </span><span class="hl-4">/* ... */</span><span class="hl-1">;</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyTypeEncoder</span><span class="hl-1"> = (): </span><span class="hl-14">Encoder</span><span class="hl-1">&lt;</span><span class="hl-14">MyType</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">/* ... */</span><span class="hl-1"> };</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyTypeDecoder</span><span class="hl-1"> = (): </span><span class="hl-14">Decoder</span><span class="hl-1">&lt;</span><span class="hl-14">MyType</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">/* ... */</span><span class="hl-1"> };</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyTypeCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">MyType</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getMyTypeEncoder</span><span class="hl-1">(), </span><span class="hl-0">getMyTypeDecoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:different-from-and-to-types" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Different From and To types<a href="#md:different-from-and-to-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When creating codecs, the encoded type is allowed to be looser than the decoded type. A good example of that is the u64 number codec:</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u64Codec</span><span class="hl-1">: </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1"> | </span><span class="hl-14">bigint</span><span class="hl-1">, </span><span class="hl-14">bigint</span><span class="hl-1">&gt; = </span><span class="hl-0">getU64Codec</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>As you can see, the first type parameter is looser since it accepts numbers or big integers, whereas the second type parameter only accepts big integers. That’s because when <em>encoding</em> a u64 number, you may provide either a <code>bigint</code> or a <code>number</code> for convenience. However, when you decode a u64 number, you will always get a <code>bigint</code> because not all u64 values can fit in a JavaScript <code>number</code> type.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytes</span><span class="hl-1"> = </span><span class="hl-11">u64Codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-11">u64Codec</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">); </span><span class="hl-4">// BigInt(42)</span>
</code><button type="button">Copy</button></pre>

<p>This relationship between the type we encode “From” and decode “To” can be generalized in TypeScript as <code>To extends From</code>.</p>
<p>Here’s another example using an object with default values. You can read more about the <code>transformEncoder</code> helper below.</p>
<pre><code class="ts"><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">Person</span><span class="hl-1"> = { </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">, </span><span class="hl-11">age</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1"> };</span><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">PersonInput</span><span class="hl-1"> = { </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">, </span><span class="hl-11">age</span><span class="hl-1">?: </span><span class="hl-14">number</span><span class="hl-1"> };</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonEncoder</span><span class="hl-1"> = (): </span><span class="hl-14">Encoder</span><span class="hl-1">&lt;</span><span class="hl-14">PersonInput</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">transformEncoder</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-0">getStructEncoder</span><span class="hl-1">([</span><br/><span class="hl-1">            [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">addEncoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Encoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Encoder</span><span class="hl-1">())],</span><br/><span class="hl-1">            [</span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">, </span><span class="hl-0">getU32Encoder</span><span class="hl-1">()],</span><br/><span class="hl-1">        ]),</span><br/><span class="hl-1">        </span><span class="hl-11">input</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> { ...</span><span class="hl-11">input</span><span class="hl-1">, </span><span class="hl-15">age</span><span class="hl-1">: </span><span class="hl-11">input</span><span class="hl-1">.</span><span class="hl-11">age</span><span class="hl-1"> ?? </span><span class="hl-13">42</span><span class="hl-1"> }</span><br/><span class="hl-1">    );</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonDecoder</span><span class="hl-1"> = (): </span><span class="hl-14">Decoder</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">getStructDecoder</span><span class="hl-1">([</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">addDecoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Decoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Decoder</span><span class="hl-1">())],</span><br/><span class="hl-1">        [</span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">, </span><span class="hl-0">getU32Decoder</span><span class="hl-1">()],</span><br/><span class="hl-1">    ]);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">PersonInput</span><span class="hl-1">, </span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getPersonEncoder</span><span class="hl-1">(), </span><span class="hl-0">getPersonDecoder</span><span class="hl-1">())</span>
</code><button type="button">Copy</button></pre>

<a id="md:fixed-size-and-variable-size-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Fixed-size and variable-size codecs<a href="#md:fixed-size-and-variable-size-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It is also worth noting that Codecs can either be of fixed size or variable size.</p>
<p><code>FixedSizeCodecs</code> have a <code>fixedSize</code> number attribute that tells us exactly how big their encoded data is in bytes.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">myCodec</span><span class="hl-1">: </span><span class="hl-14">FixedSizeCodec</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1">&gt; = </span><span class="hl-0">getU32Codec</span><span class="hl-1">();</span><br/><span class="hl-11">myCodec</span><span class="hl-1">.</span><span class="hl-11">fixedSize</span><span class="hl-1">; </span><span class="hl-4">// 4 bytes.</span>
</code><button type="button">Copy</button></pre>

<p>On the other hand, <code>VariableSizeCodecs</code> do not know the size of their encoded data in advance. Instead, they will grab that information either from the provided encoded data or from the value to encode. For the former, we can simply access the length of the <code>Uint8Array</code>. For the latter, it provides a <code>getSizeFromValue</code> that tells us the encoded byte size of the provided value.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">myCodec</span><span class="hl-1">: </span><span class="hl-14">VariableSizeCodec</span><span class="hl-1">&lt;</span><span class="hl-14">string</span><span class="hl-1">&gt; = </span><span class="hl-0">addCodecSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-0">getU32Codec</span><span class="hl-1">());</span><br/><span class="hl-11">myCodec</span><span class="hl-1">.</span><span class="hl-0">getSizeFromValue</span><span class="hl-1">(</span><span class="hl-2">&#39;hello world&#39;</span><span class="hl-1">); </span><span class="hl-4">// 4 + 11 bytes.</span>
</code><button type="button">Copy</button></pre>

<p>Also note that, if the <code>VariableSizeCodec</code> is bounded by a maximum size, it can be provided as a <code>maxSize</code> number attribute.</p>
<p>The following type guards are available to identify and/or assert the size of codecs: <code>isFixedSize</code>, <code>isVariableSize</code>, <code>assertIsFixedSize</code> and <code>assertIsVariableSize</code>.</p>
<p>Finally, note that the same is true for <code>Encoders</code> and <code>Decoders</code>.</p>
<ul>
<li>A <code>FixedSizeEncoder</code> has a <code>fixedSize</code> number attribute.</li>
<li>A <code>VariableSizeEncoder</code> has a <code>getSizeFromValue</code> function and an optional <code>maxSize</code> number attribute.</li>
<li>A <code>FixedSizeDecoder</code> has a <code>fixedSize</code> number attribute.</li>
<li>A <code>VariableSizeDecoder</code> has an optional <code>maxSize</code> number attribute.</li>
</ul>
<a id="md:creating-custom-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Creating custom codecs<a href="#md:creating-custom-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If composing codecs isn’t enough for you, you may implement your own codec logic by using the <code>createCodec</code> function. This function requires an object with a <code>read</code> and a <code>write</code> function telling us how to read from and write to an existing byte array.</p>
<p>The <code>read</code> function accepts the <code>bytes</code> to decode from and the <code>offset</code> at each we should start reading. It returns an array with two items:</p>
<ul>
<li>The first item should be the decoded value.</li>
<li>The second item should be the next offset to read from.</li>
</ul>
<pre><code class="ts"><span class="hl-0">createCodec</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-11">bytes</span><span class="hl-1">[</span><span class="hl-11">offset</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-10">return</span><span class="hl-1"> [</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">];</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">// ...</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Reciprocally, the <code>write</code> function accepts the <code>value</code> to encode, the array of <code>bytes</code> to write the encoded value to and the <code>offset</code> at which it should be written. It should encode the given value, insert it in the byte array, and provide the next offset to write to as the return value.</p>
<pre><code class="ts"><span class="hl-0">createCodec</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">// ...</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Additionally, we must specify the size of the codec. If we are defining a <code>FixedSizeCodec</code>, we must simply provide the <code>fixedSize</code> number attribute. For <code>VariableSizeCodecs</code>, we must provide the <code>getSizeFromValue</code> function as described in the previous section.</p>
<pre><code class="ts"><span class="hl-4">// FixedSizeCodec.</span><br/><span class="hl-0">createCodec</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-11">fixedSize:</span><span class="hl-1"> </span><span class="hl-13">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">// ...</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">// VariableSizeCodec.</span><br/><span class="hl-0">createCodec</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">getSizeFromValue</span><span class="hl-11">:</span><span class="hl-1"> (</span><span class="hl-11">value</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">value</span><span class="hl-1">.</span><span class="hl-11">length</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">// ...</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Here’s a concrete example of a custom codec that encodes any unsigned integer in a single byte. Since a single byte can only store integers from 0 to 255, if any other integer is provided it will take its modulo 256 to ensure it fits in a single byte. Because it always requires a single byte, that codec is a <code>FixedSizeCodec</code> of size <code>1</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getModuloU8Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">createCodec</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">        </span><span class="hl-11">fixedSize:</span><span class="hl-1"> </span><span class="hl-13">1</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-11">bytes</span><span class="hl-1">[</span><span class="hl-11">offset</span><span class="hl-1">];</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> [</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">];</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1"> % </span><span class="hl-13">256</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span>
</code><button type="button">Copy</button></pre>

<p>Note that, it is also possible to create custom encoders and decoders separately by using the <code>createEncoder</code> and <code>createDecoder</code> functions respectively and then use the <code>combineCodec</code> function on them just like we were doing with composed codecs.</p>
<p>This approach is recommended to library maintainers as it allows their users to tree-shake any of the encoders and/or decoders they don’t need.</p>
<p>Here’s our previous modulo u8 example but split into separate <code>Encoder</code>, <code>Decoder</code> and <code>Codec</code> instances.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getModuloU8Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">createEncoder</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">        </span><span class="hl-11">fixedSize:</span><span class="hl-1"> </span><span class="hl-13">1</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1"> % </span><span class="hl-13">256</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getModuloU8Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">createDecoder</span><span class="hl-1">&lt;</span><span class="hl-14">number</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">        </span><span class="hl-11">fixedSize:</span><span class="hl-1"> </span><span class="hl-13">1</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-11">bytes</span><span class="hl-1">[</span><span class="hl-11">offset</span><span class="hl-1">];</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> [</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-13">1</span><span class="hl-1">];</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getModuloU8Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getModuloU8Encoder</span><span class="hl-1">(), </span><span class="hl-0">getModuloU8Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<p>Here’s another example returning a <code>VariableSizeCodec</code>. This one transforms a simple string composed of characters from <code>a</code> to <code>z</code> to a buffer of numbers from <code>1</code> to <code>26</code> where <code>0</code> bytes are spaces.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">alphabet</span><span class="hl-1"> = </span><span class="hl-2">&#39; abcdefghijklmnopqrstuvwxyz&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getCipherEncoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">createEncoder</span><span class="hl-1">&lt;</span><span class="hl-14">string</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">        </span><span class="hl-0">getSizeFromValue</span><span class="hl-11">:</span><span class="hl-1"> </span><span class="hl-11">value</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">value</span><span class="hl-1">.</span><span class="hl-11">length</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytesToAdd</span><span class="hl-1"> = [...</span><span class="hl-11">value</span><span class="hl-1">].</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-11">char</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">alphabet</span><span class="hl-1">.</span><span class="hl-0">indexOf</span><span class="hl-1">(</span><span class="hl-11">char</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-11">bytesToAdd</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-11">offset</span><span class="hl-1"> + </span><span class="hl-11">bytesToAdd</span><span class="hl-1">.</span><span class="hl-11">length</span><span class="hl-1">;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getCipherDecoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">createDecoder</span><span class="hl-1">&lt;</span><span class="hl-14">string</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">        </span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">, </span><span class="hl-11">offset</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = [...</span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-0">slice</span><span class="hl-1">(</span><span class="hl-11">offset</span><span class="hl-1">)].</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-11">byte</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">alphabet</span><span class="hl-1">.</span><span class="hl-0">charAt</span><span class="hl-1">(</span><span class="hl-11">byte</span><span class="hl-1">)).</span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-2">&#39;&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-10">return</span><span class="hl-1"> [</span><span class="hl-11">value</span><span class="hl-1">, </span><span class="hl-11">bytes</span><span class="hl-1">.</span><span class="hl-11">length</span><span class="hl-1">];</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getCipherCodec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getCipherEncoder</span><span class="hl-1">(), </span><span class="hl-0">getCipherDecoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:transforming-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Transforming codecs<a href="#md:transforming-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It is possible to transform a <code>Codec&lt;T&gt;</code> to a <code>Codec&lt;U&gt;</code> by providing two mapping functions: one that goes from <code>T</code> to <code>U</code> and one that does the opposite.</p>
<p>For instance, here’s how you would map a <code>u32</code> integer into a <code>string</code> representation of that number.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getStringU32Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">transformCodec</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-0">getU32Codec</span><span class="hl-1">(),</span><br/><span class="hl-1">        (</span><span class="hl-11">integerAsString</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">): </span><span class="hl-14">number</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">parseInt</span><span class="hl-1">(</span><span class="hl-11">integerAsString</span><span class="hl-1">),</span><br/><span class="hl-1">        (</span><span class="hl-11">integer</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1">): </span><span class="hl-14">string</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">integer</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">(),</span><br/><span class="hl-1">    );</span><br/><br/><span class="hl-0">getStringU32Codec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;42&#39;</span><span class="hl-1">); </span><span class="hl-4">// new Uint8Array([42])</span><br/><span class="hl-0">getStringU32Codec</span><span class="hl-1">().</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">42</span><span class="hl-1">])); </span><span class="hl-4">// &quot;42&quot;</span>
</code><button type="button">Copy</button></pre>

<p>If a <code>Codec</code> has <a href="#md:different-from-and-to-types">different From and To types</a>, say <code>Codec&lt;OldFrom, OldTo&gt;</code>, and we want to map it to <code>Codec&lt;NewFrom, NewTo&gt;</code>, we must provide functions that map from <code>NewFrom</code> to <code>OldFrom</code> and from <code>OldTo</code> to <code>NewTo</code>.</p>
<p>To illustrate that, let’s take our previous <code>getStringU32Codec</code> example but make it use a <code>getU64Codec</code> codec instead as it returns a <code>Codec&lt;number | bigint, bigint&gt;</code>. Additionally, let’s make it so our <code>getStringU64Codec</code> function returns a <code>Codec&lt;number | string, string&gt;</code> so that it also accepts numbers when encoding values. Here’s what our mapping functions look like:</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getStringU64Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">transformCodec</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-0">getU64Codec</span><span class="hl-1">(),</span><br/><span class="hl-1">        (</span><span class="hl-11">integerInput</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1"> | </span><span class="hl-14">string</span><span class="hl-1">): </span><span class="hl-14">number</span><span class="hl-1"> | </span><span class="hl-14">bigint</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">            </span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-11">integerInput</span><span class="hl-1"> === </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1"> ? </span><span class="hl-0">BigInt</span><span class="hl-1">(</span><span class="hl-11">integerAsString</span><span class="hl-1">) : </span><span class="hl-11">integerInput</span><span class="hl-1">,</span><br/><span class="hl-1">        (</span><span class="hl-11">integer</span><span class="hl-1">: </span><span class="hl-14">bigint</span><span class="hl-1">): </span><span class="hl-14">string</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">integer</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">(),</span><br/><span class="hl-1">    );</span>
</code><button type="button">Copy</button></pre>

<p>Note that the second function that maps the decoded type is optional. That means, you can omit it to simply update or loosen the type to encode whilst keeping the decoded type the same.</p>
<p>This is particularly useful to provide default values to object structures. For instance, here’s how we can map our <code>Person</code> codec to give a default value to its <code>age</code> attribute.</p>
<pre><code class="ts"><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">Person</span><span class="hl-1"> = { </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">; </span><span class="hl-11">age</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1">; }</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">/*...*/</span><span class="hl-1"> }</span><br/><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-14">PersonInput</span><span class="hl-1"> = { </span><span class="hl-11">name</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">; </span><span class="hl-11">age</span><span class="hl-1">?: </span><span class="hl-14">number</span><span class="hl-1">; }</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getPersonWithDefaultValueCodec</span><span class="hl-1"> = (): </span><span class="hl-14">Codec</span><span class="hl-1">&lt;</span><span class="hl-14">PersonInput</span><span class="hl-1">, </span><span class="hl-14">Person</span><span class="hl-1">&gt; </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">transformCodec</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-0">getPersonCodec</span><span class="hl-1">(),</span><br/><span class="hl-1">        (</span><span class="hl-11">person</span><span class="hl-1">: </span><span class="hl-14">PersonInput</span><span class="hl-1">): </span><span class="hl-14">Person</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> { ...</span><span class="hl-11">person</span><span class="hl-1">, </span><span class="hl-15">age</span><span class="hl-1">: </span><span class="hl-11">person</span><span class="hl-1">.</span><span class="hl-11">age</span><span class="hl-1"> ?? </span><span class="hl-13">42</span><span class="hl-1"> }</span><br/><span class="hl-1">    )</span>
</code><button type="button">Copy</button></pre>

<p>Similar helpers exist to map <code>Encoder</code> and <code>Decoder</code> instances allowing you to separate your codec logic into tree-shakeable functions. Here’s our <code>getStringU32Codec</code> written that way.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getStringU32Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">transformEncoder</span><span class="hl-1">(</span><span class="hl-0">getU32Encoder</span><span class="hl-1">(), (</span><span class="hl-11">integerAsString</span><span class="hl-1">: </span><span class="hl-14">string</span><span class="hl-1">): </span><span class="hl-14">number</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">parseInt</span><span class="hl-1">(</span><span class="hl-11">integerAsString</span><span class="hl-1">));</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getStringU32Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">transformDecoder</span><span class="hl-1">(</span><span class="hl-0">getU32Decoder</span><span class="hl-1">(), (</span><span class="hl-11">integer</span><span class="hl-1">: </span><span class="hl-14">number</span><span class="hl-1">): </span><span class="hl-14">string</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">integer</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getStringU32Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getStringU32Encoder</span><span class="hl-1">(), </span><span class="hl-0">getStringU32Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:fixing-the-size-of-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Fixing the size of codecs<a href="#md:fixing-the-size-of-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>fixCodecSize</code> function allows you to bind the size of a given codec to the given fixed size.</p>
<p>For instance, say you want to represent a base-58 string that uses exactly 32 bytes when decoded. Here’s how you can use the <code>fixCodecSize</code> helper to achieve that.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">get32BytesBase58Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">fixCodecSize</span><span class="hl-1">(</span><span class="hl-0">getBase58Codec</span><span class="hl-1">(), </span><span class="hl-13">32</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>You may also use the <code>fixEncoderSize</code> and <code>fixDecoderSize</code> functions to separate your codec logic like so:</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">get32BytesBase58Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">fixEncoderSize</span><span class="hl-1">(</span><span class="hl-0">getBase58Encoder</span><span class="hl-1">(), </span><span class="hl-13">32</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">get32BytesBase58Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">fixDecoderSize</span><span class="hl-1">(</span><span class="hl-0">getBase58Decoder</span><span class="hl-1">(), </span><span class="hl-13">32</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">get32BytesBase58Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">get32BytesBase58Encoder</span><span class="hl-1">(), </span><span class="hl-0">get32BytesBase58Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:prefixing-codecs-with-their-size" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Prefixing codecs with their size<a href="#md:prefixing-codecs-with-their-size" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>addCodecSizePrefix</code> function allows you to store the byte size of any codec as a number prefix. This allows you to contain variable-size codecs to their actual size.</p>
<p>When encoding, the size of the encoded data is stored before the encoded data itself. When decoding, the size is read first to know how many bytes to read next.</p>
<p>For example, say we want to represent a variable-size base-58 string using a <code>u32</code> size prefix — the equivalent of a Borsh <code>String</code> in Rust. Here’s how you can use the <code>addCodecSizePrefix</code> function to achieve that.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32Base58Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">addCodecSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getBase58Codec</span><span class="hl-1">(), </span><span class="hl-0">getU32Codec</span><span class="hl-1">());</span><br/><br/><span class="hl-0">getU32Base58Codec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;hello world&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x0b00000068656c6c6f20776f726c64</span><br/><span class="hl-4">//   |       └-- Our encoded base-58 string.</span><br/><span class="hl-4">//   └-- Our encoded u32 size prefix.</span>
</code><button type="button">Copy</button></pre>

<p>You may also use the <code>addEncoderSizePrefix</code> and <code>addDecoderSizePrefix</code> functions to separate your codec logic like so:</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32Base58Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">addEncoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getBase58Encoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Encoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32Base58Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">addDecoderSizePrefix</span><span class="hl-1">(</span><span class="hl-0">getBase58Decoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Decoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32Base58Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getU32Base58Encoder</span><span class="hl-1">(), </span><span class="hl-0">getU32Base58Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:adding-sentinels-to-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Adding sentinels to codecs<a href="#md:adding-sentinels-to-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Another way of delimiting the size of a codec is to use sentinels. The <code>addCodecSentinel</code> function allows us to add a sentinel to the end of the encoded data and to read until that sentinel is found when decoding. It accepts any codec and a <code>Uint8Array</code> sentinel responsible for delimiting the encoded data.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codec</span><span class="hl-1"> = </span><span class="hl-0">addCodecSentinel</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">255</span><span class="hl-1">, </span><span class="hl-13">255</span><span class="hl-1">]));</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;hello&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x68656c6c6fffff</span><br/><span class="hl-4">//   |        └-- Our sentinel.</span><br/><span class="hl-4">//   └-- Our encoded string.</span>
</code><button type="button">Copy</button></pre>

<p>Note that the sentinel <em>must not</em> be present in the encoded data and <em>must</em> be present in the decoded data for this to work. If this is not the case, dedicated errors will be thrown.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">sentinel</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">108</span><span class="hl-1">, </span><span class="hl-13">108</span><span class="hl-1">]); </span><span class="hl-4">// &#39;ll&#39;</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">codec</span><span class="hl-1"> = </span><span class="hl-0">addCodecSentinel</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-11">sentinel</span><span class="hl-1">);</span><br/><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;hello&#39;</span><span class="hl-1">); </span><span class="hl-4">// Throws: sentinel is in encoded data.</span><br/><span class="hl-11">codec</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">])); </span><span class="hl-4">// Throws: sentinel missing in decoded data.</span>
</code><button type="button">Copy</button></pre>

<p>Separate <code>addEncoderSentinel</code> and <code>addDecoderSentinel</code> functions are also available.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">bytes</span><span class="hl-1"> = </span><span class="hl-0">addEncoderSentinel</span><span class="hl-1">(</span><span class="hl-0">getUtf8Encoder</span><span class="hl-1">(), </span><span class="hl-11">sentinel</span><span class="hl-1">).</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;hello&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">value</span><span class="hl-1"> = </span><span class="hl-0">addDecoderSentinel</span><span class="hl-1">(</span><span class="hl-0">getUtf8Decoder</span><span class="hl-1">(), </span><span class="hl-11">sentinel</span><span class="hl-1">).</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-11">bytes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:adjusting-the-size-of-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Adjusting the size of codecs<a href="#md:adjusting-the-size-of-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>resizeCodec</code> helper re-defines the size of a given codec by accepting a function that takes the current size of the codec and returns a new size. This works for both fixed-size and variable-size codecs.</p>
<pre><code class="ts"><span class="hl-4">// Fixed-size codec.</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerU32Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">resizeCodec</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-0">getBiggerU32Codec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x2a00000000000000</span><br/><span class="hl-4">//   |       └-- Empty buffer space caused by the resizeCodec function.</span><br/><span class="hl-4">//   └-- Our encoded u32 number.</span><br/><br/><span class="hl-4">// Variable-size codec.</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerUtf8Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">resizeCodec</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-0">getBiggerUtf8Codec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-2">&#39;ABC&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x41424300000000</span><br/><span class="hl-4">//   |     └-- Empty buffer space caused by the resizeCodec function.</span><br/><span class="hl-4">//   └-- Our encoded string.</span>
</code><button type="button">Copy</button></pre>

<p>Note that the <code>resizeCodec</code> function doesn't change any encoded or decoded bytes, it merely tells the <code>encode</code> and <code>decode</code> functions how big the <code>Uint8Array</code> should be before delegating to their respective <code>write</code> and <code>read</code> functions. In fact, this is completely bypassed when using the <code>write</code> and <code>read</code> functions directly. For instance:</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerU32Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">resizeCodec</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><br/><span class="hl-4">// Using the encode function.</span><br/><span class="hl-0">getBiggerU32Codec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x2a00000000000000</span><br/><br/><span class="hl-4">// Using the lower-level write function.</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">myCustomBytes</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">(</span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-0">getBiggerU32Codec</span><span class="hl-1">().</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-13">42</span><span class="hl-1">, </span><span class="hl-11">myCustomBytes</span><span class="hl-1">, </span><span class="hl-13">0</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x2a000000</span>
</code><button type="button">Copy</button></pre>

<p>So when would it make sense to use the <code>resizeCodec</code> function? This function is particularly useful when combined with the <code>offsetCodec</code> function described below. Whilst the <code>offsetCodec</code> may help us push the offset forward — e.g. to skip some padding — it won't change the size of the encoded data which means the last bytes will be truncated by how much we pushed the offset forward. The <code>resizeCodec</code> function can be used to fix that. For instance, here's how we can use the <code>resizeCodec</code> and the <code>offsetCodec</code> functions together to create a struct codec that includes some padding.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">personCodec</span><span class="hl-1"> = </span><span class="hl-0">getStructCodec</span><span class="hl-1">([</span><br/><span class="hl-1">    [</span><span class="hl-2">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-0">fixCodecSize</span><span class="hl-1">(</span><span class="hl-0">getUtf8Codec</span><span class="hl-1">(), </span><span class="hl-13">8</span><span class="hl-1">)],</span><br/><span class="hl-1">    </span><span class="hl-4">// There is a 4-byte padding between name and age.</span><br/><span class="hl-1">    [</span><br/><span class="hl-1">        </span><span class="hl-2">&#39;age&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-0">resizeCodec</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">),</span><br/><span class="hl-1">            { </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1"> },</span><br/><span class="hl-1">        ),</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">]);</span><br/><br/><span class="hl-11">personCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">({ </span><span class="hl-11">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;Alice&#39;</span><span class="hl-1">, </span><span class="hl-11">age:</span><span class="hl-1"> </span><span class="hl-13">42</span><span class="hl-1"> });</span><br/><span class="hl-4">// 0x416c696365000000000000002a000000</span><br/><span class="hl-4">//   |               |       └-- Our encoded u32 (42).</span><br/><span class="hl-4">//   |               └-- The 4-bytes of padding we are skipping.</span><br/><span class="hl-4">//   └-- Our 8-byte encoded string (&quot;Alice&quot;).</span>
</code><button type="button">Copy</button></pre>

<p>As usual, the <code>resizeEncoder</code> and <code>resizeDecoder</code> functions can also be used to achieve that.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerU32Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">resizeEncoder</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerU32Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">resizeDecoder</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBiggerU32Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getBiggerU32Encoder</span><span class="hl-1">(), </span><span class="hl-0">getBiggerU32Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:offsetting-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Offsetting codecs<a href="#md:offsetting-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>offsetCodec</code> function is a powerful codec primitive that allows you to move the offset of a given codec forward or backwards. It accepts one or two functions that takes the current offset and returns a new offset.</p>
<p>To understand how this works, let's take our previous <code>biggerU32Codec</code> example which encodes a <code>u32</code> number inside an 8-byte buffer.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">biggerU32Codec</span><span class="hl-1"> = </span><span class="hl-0">resizeCodec</span><span class="hl-1">(</span><span class="hl-0">getU32Codec</span><span class="hl-1">(), </span><span class="hl-11">size</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">size</span><span class="hl-1"> + </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-11">biggerU32Codec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0xffffffff00000000</span><br/><span class="hl-4">//   |       └-- Empty buffer space caused by the resizeCodec function.</span><br/><span class="hl-4">//   └-- Our encoded u32 number.</span>
</code><button type="button">Copy</button></pre>

<p>Now, let's say we want to move the offset of that codec 2 bytes forward so that the encoded number sits in the middle of the buffer. To achieve, this we can use the <code>offsetCodec</code> helper and provide a <code>preOffset</code> function that moves the &quot;pre-offset&quot; of the codec 2 bytes forward.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheMiddleCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">u32InTheMiddleCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x0000ffffffff0000</span><br/><span class="hl-4">//       └-- Our encoded u32 number is now in the middle of the buffer.</span>
</code><button type="button">Copy</button></pre>

<p>We refer to this offset as the &quot;pre-offset&quot; because, once the inner codec is encoded or decoded, an additional offset will be returned which we refer to as the &quot;post-offset&quot;. That &quot;post-offset&quot; is important as, unless we are reaching the end of our codec, it will be used by any further codecs to continue encoding or decoding data.</p>
<p>By default, that &quot;post-offset&quot; is simply the addition of the &quot;pre-offset&quot; and the size of the encoded or decoded inner data.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheMiddleCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">u32InTheMiddleCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x0000ffffffff0000</span><br/><span class="hl-4">//   |   |       └-- Post-offset.</span><br/><span class="hl-4">//   |   └-- New pre-offset: The original pre-offset + 2.</span><br/><span class="hl-4">//   └-- Pre-offset: The original pre-offset before we adjusted it.</span>
</code><button type="button">Copy</button></pre>

<p>However, you may also provide a <code>postOffset</code> function to adjust the &quot;post-offset&quot;. For instance, let's push the &quot;post-offset&quot; 2 bytes forward as well such that any further codecs will start doing their job at the end of our 8-byte <code>u32</code> number.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheMiddleCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">postOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">postOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">postOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">u32InTheMiddleCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x0000ffffffff0000</span><br/><span class="hl-4">//   |   |       |   └-- New post-offset: The original post-offset + 2.</span><br/><span class="hl-4">//   |   |       └-- Post-offset: The original post-offset before we adjusted it.</span><br/><span class="hl-4">//   |   └-- New pre-offset: The original pre-offset + 2.</span><br/><span class="hl-4">//   └-- Pre-offset: The original pre-offset before we adjusted it.</span>
</code><button type="button">Copy</button></pre>

<p>Both the <code>preOffset</code> and <code>postOffset</code> functions offer the following attributes:</p>
<ul>
<li><code>bytes</code>: The entire byte array being encoded or decoded.</li>
<li><code>preOffset</code>: The original and unaltered pre-offset.</li>
<li><code>wrapBytes</code>: A helper function that wraps the given offset around the byte array length. E.g. <code>wrapBytes(-1)</code> will refer to the last byte of the byte array.</li>
</ul>
<p>Additionally, the post-offset function also provides the following attributes:</p>
<ul>
<li><code>newPreOffset</code>: The new pre-offset after the pre-offset function has been applied.</li>
<li><code>postOffset</code>: The original and unaltered post-offset.</li>
</ul>
<p>Note that you may also decide to ignore these attributes to achieve absolute offsets. However, relative offsets are usually recommended as they won't break your codecs when composed with other codecs.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheMiddleCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">postOffset</span><span class="hl-11">:</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">8</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-11">u32InTheMiddleCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x0000ffffffff0000</span>
</code><button type="button">Copy</button></pre>

<p>Also note that any negative offset or offset that exceeds the size of the byte array will throw a <code>SolanaError</code> of code <code>SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheEndCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, { </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> -</span><span class="hl-13">4</span><span class="hl-1"> });</span><br/><span class="hl-11">u32InTheEndCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// throws new SolanaError(SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE)</span>
</code><button type="button">Copy</button></pre>

<p>To avoid this, you may use the <code>wrapBytes</code> function to wrap the offset around the byte array length. For instance, here's how we can use the <code>wrapBytes</code> function to move the pre-offset 4 bytes from the end of the byte array.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">u32InTheEndCodec</span><span class="hl-1"> = </span><span class="hl-0">offsetCodec</span><span class="hl-1">(</span><span class="hl-11">biggerU32Codec</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">wrapBytes</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">wrapBytes</span><span class="hl-1">(-</span><span class="hl-13">4</span><span class="hl-1">),</span><br/><span class="hl-1">});</span><br/><span class="hl-11">u32InTheEndCodec</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffffffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x00000000ffffffff</span>
</code><button type="button">Copy</button></pre>

<p>As you can see, the <code>offsetCodec</code> helper allows you to jump all over the place with your codecs. This non-linear approach to encoding and decoding data allows you to achieve complex serialization strategies that would otherwise be impossible.</p>
<p>As usual, the <code>offsetEncoder</code> and <code>offsetDecoder</code> functions can also be used to split your codec logic into tree-shakeable functions.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32InTheMiddleEncoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">offsetEncoder</span><span class="hl-1">(</span><span class="hl-11">biggerU32Encoder</span><span class="hl-1">, { </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1"> });</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32InTheMiddleDecoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">offsetDecoder</span><span class="hl-1">(</span><span class="hl-11">biggerU32Decoder</span><span class="hl-1">, { </span><span class="hl-0">preOffset</span><span class="hl-11">:</span><span class="hl-1"> ({ </span><span class="hl-11">preOffset</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-11">preOffset</span><span class="hl-1"> + </span><span class="hl-13">2</span><span class="hl-1"> });</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getU32InTheMiddleCodec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getU32InTheMiddleEncoder</span><span class="hl-1">(), </span><span class="hl-0">getU32InTheMiddleDecoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:padding-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Padding codecs<a href="#md:padding-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>padLeftCodec</code> and <code>padRightCodec</code> helpers can be used to add padding to the left or right of a given codec. They accept an <code>offset</code> number that tells us how big the padding should be.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getLeftPaddedCodec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">padLeftCodec</span><span class="hl-1">(</span><span class="hl-0">getU16Codec</span><span class="hl-1">(), </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-0">getLeftPaddedCodec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0x00000000ffff</span><br/><span class="hl-4">//   |       └-- Our encoded u16 number.</span><br/><span class="hl-4">//   └-- Our 4-byte padding.</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getRightPaddedCodec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">padRightCodec</span><span class="hl-1">(</span><span class="hl-0">getU16Codec</span><span class="hl-1">(), </span><span class="hl-13">4</span><span class="hl-1">);</span><br/><span class="hl-0">getRightPaddedCodec</span><span class="hl-1">().</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-13">0xffff</span><span class="hl-1">);</span><br/><span class="hl-4">// 0xffff00000000</span><br/><span class="hl-4">//   |   └-- Our 4-byte padding.</span><br/><span class="hl-4">//   └-- Our encoded u16 number.</span>
</code><button type="button">Copy</button></pre>

<p>Note that both the <code>padLeftCodec</code> and <code>padRightCodec</code> functions are simple wrappers around the <code>offsetCodec</code> and <code>resizeCodec</code> functions. For more complex padding strategies, you may want to use the <code>offsetCodec</code> and <code>resizeCodec</code> functions directly instead.</p>
<p>As usual, encoder-only and decoder-only helpers are available for these padding functions. Namely, <code>padLeftEncoder</code>, <code>padRightEncoder</code>, <code>padLeftDecoder</code> and <code>padRightDecoder</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyPaddedEncoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">padLeftEncoder</span><span class="hl-1">(</span><span class="hl-0">getU16Encoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyPaddedDecoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">padLeftDecoder</span><span class="hl-1">(</span><span class="hl-0">getU16Decoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getMyPaddedCodec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getMyPaddedEncoder</span><span class="hl-1">(), </span><span class="hl-0">getMyPaddedDecoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:reversing-codecs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Reversing codecs<a href="#md:reversing-codecs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>reverseCodec</code> helper reverses the bytes of the provided <code>FixedSizeCodec</code>.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBigEndianU64Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">reverseCodec</span><span class="hl-1">(</span><span class="hl-0">getU64Codec</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<p>Note that number codecs can already do that for you via their <code>endian</code> option.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBigEndianU64Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">getU64Codec</span><span class="hl-1">({ </span><span class="hl-11">endian:</span><span class="hl-1"> </span><span class="hl-11">Endian</span><span class="hl-1">.</span><span class="hl-11">Big</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<p>As usual, the <code>reverseEncoder</code> and <code>reverseDecoder</code> functions can also be used to achieve that.</p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBigEndianU64Encoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">reverseEncoder</span><span class="hl-1">(</span><span class="hl-0">getU64Encoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBigEndianU64Decoder</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">reverseDecoder</span><span class="hl-1">(</span><span class="hl-0">getU64Decoder</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">getBigEndianU64Codec</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">combineCodec</span><span class="hl-1">(</span><span class="hl-0">getBigEndianU64Encoder</span><span class="hl-1">(), </span><span class="hl-0">getBigEndianU64Decoder</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<a id="md:byte-helpers" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Byte helpers<a href="#md:byte-helpers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This package also provides utility functions for managing bytes such as:</p>
<ul>
<li><code>mergeBytes</code>: Concatenates an array of <code>Uint8Arrays</code> into a single <code>Uint8Array</code>.</li>
<li><code>padBytes</code>: Pads a <code>Uint8Array</code> with zeroes (to the right) to the specified length.</li>
<li><code>fixBytes</code>: Pads or truncates a <code>Uint8Array</code> so it has the specified length.</li>
<li><code>containsBytes</code>: Checks if a <code>Uint8Array</code> contains another <code>Uint8Array</code> at a given offset.</li>
</ul>
<pre><code class="ts"><span class="hl-4">// Merge multiple Uint8Array buffers into one.</span><br/><span class="hl-0">mergeBytes</span><span class="hl-1">([</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">]), </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">3</span><span class="hl-1">, </span><span class="hl-13">4</span><span class="hl-1">])]); </span><span class="hl-4">// Uint8Array([1, 2, 3, 4])</span><br/><br/><span class="hl-4">// Pad a Uint8Array buffer to the given size.</span><br/><span class="hl-0">padBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">]), </span><span class="hl-13">4</span><span class="hl-1">); </span><span class="hl-4">// Uint8Array([1, 2, 0, 0])</span><br/><span class="hl-0">padBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">, </span><span class="hl-13">4</span><span class="hl-1">]), </span><span class="hl-13">2</span><span class="hl-1">); </span><span class="hl-4">// Uint8Array([1, 2, 3, 4])</span><br/><br/><span class="hl-4">// Pad and truncate a Uint8Array buffer to the given size.</span><br/><span class="hl-0">fixBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">]), </span><span class="hl-13">4</span><span class="hl-1">); </span><span class="hl-4">// Uint8Array([1, 2, 0, 0])</span><br/><span class="hl-0">fixBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">, </span><span class="hl-13">4</span><span class="hl-1">]), </span><span class="hl-13">2</span><span class="hl-1">); </span><span class="hl-4">// Uint8Array([1, 2])</span><br/><br/><span class="hl-4">// Check if a Uint8Array contains another Uint8Array at a given offset.</span><br/><span class="hl-0">containsBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">, </span><span class="hl-13">4</span><span class="hl-1">]), </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">]), </span><span class="hl-13">1</span><span class="hl-1">); </span><span class="hl-4">// true</span><br/><span class="hl-0">containsBytes</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">1</span><span class="hl-1">, </span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">, </span><span class="hl-13">4</span><span class="hl-1">]), </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-13">2</span><span class="hl-1">, </span><span class="hl-13">3</span><span class="hl-1">]), </span><span class="hl-13">2</span><span class="hl-1">); </span><span class="hl-4">// false</span>
</code><button type="button">Copy</button></pre>

<hr>
<p>To read more about the available codecs and how to use them, check out the documentation of the main <a href="https://github.com/solana-labs/solana-web3.js/tree/master/packages/codecs" target="_blank" class="external"><code>@solana/codecs</code> package</a>.</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Modules</h3><div class="tsd-index-list"><a href="_solana_codecs_core._internal_.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2"></use></svg><span>&lt;internal&gt;</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Interfaces</h3><div class="tsd-index-list"><a href="../interfaces/_solana_codecs_core.ReadonlyUint8Array.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Readonly<wbr/>Uint8<wbr/>Array</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Type Aliases</h3><div class="tsd-index-list"><a href="../types/_solana_codecs_core.Codec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Codec</span></a>
<a href="../types/_solana_codecs_core.Decoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Decoder</span></a>
<a href="../types/_solana_codecs_core.Encoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Encoder</span></a>
<a href="../types/_solana_codecs_core.FixedSizeCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Fixed<wbr/>Size<wbr/>Codec</span></a>
<a href="../types/_solana_codecs_core.FixedSizeDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Fixed<wbr/>Size<wbr/>Decoder</span></a>
<a href="../types/_solana_codecs_core.FixedSizeEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Fixed<wbr/>Size<wbr/>Encoder</span></a>
<a href="../types/_solana_codecs_core.Offset.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Offset</span></a>
<a href="../types/_solana_codecs_core.VariableSizeCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Variable<wbr/>Size<wbr/>Codec</span></a>
<a href="../types/_solana_codecs_core.VariableSizeDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Variable<wbr/>Size<wbr/>Decoder</span></a>
<a href="../types/_solana_codecs_core.VariableSizeEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Variable<wbr/>Size<wbr/>Encoder</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/_solana_codecs_core.addCodecSentinel.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Codec<wbr/>Sentinel</span></a>
<a href="../functions/_solana_codecs_core.addCodecSizePrefix.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Codec<wbr/>Size<wbr/>Prefix</span></a>
<a href="../functions/_solana_codecs_core.addDecoderSentinel.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Decoder<wbr/>Sentinel</span></a>
<a href="../functions/_solana_codecs_core.addDecoderSizePrefix.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Decoder<wbr/>Size<wbr/>Prefix</span></a>
<a href="../functions/_solana_codecs_core.addEncoderSentinel.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Encoder<wbr/>Sentinel</span></a>
<a href="../functions/_solana_codecs_core.addEncoderSizePrefix.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>add<wbr/>Encoder<wbr/>Size<wbr/>Prefix</span></a>
<a href="../functions/_solana_codecs_core.assertByteArrayHasEnoughBytesForCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>assert<wbr/>Byte<wbr/>Array<wbr/>Has<wbr/>Enough<wbr/>Bytes<wbr/>For<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.assertByteArrayIsNotEmptyForCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>assert<wbr/>Byte<wbr/>Array<wbr/>Is<wbr/>Not<wbr/>Empty<wbr/>For<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.assertByteArrayOffsetIsNotOutOfRange.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>assert<wbr/>Byte<wbr/>Array<wbr/>Offset<wbr/>Is<wbr/>Not<wbr/>Out<wbr/>Of<wbr/>Range</span></a>
<a href="../functions/_solana_codecs_core.assertIsFixedSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>assert<wbr/>Is<wbr/>Fixed<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.assertIsVariableSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>assert<wbr/>Is<wbr/>Variable<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.combineCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>combine<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.containsBytes.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>contains<wbr/>Bytes</span></a>
<a href="../functions/_solana_codecs_core.createCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>create<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.createDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>create<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.createEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>create<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.fixBytes.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>fix<wbr/>Bytes</span></a>
<a href="../functions/_solana_codecs_core.fixCodecSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>fix<wbr/>Codec<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.fixDecoderSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>fix<wbr/>Decoder<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.fixEncoderSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>fix<wbr/>Encoder<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.getEncodedSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>get<wbr/>Encoded<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.isFixedSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>is<wbr/>Fixed<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.isVariableSize.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>is<wbr/>Variable<wbr/>Size</span></a>
<a href="../functions/_solana_codecs_core.mergeBytes.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>merge<wbr/>Bytes</span></a>
<a href="../functions/_solana_codecs_core.offsetCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>offset<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.offsetDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>offset<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.offsetEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>offset<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.padBytes.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Bytes</span></a>
<a href="../functions/_solana_codecs_core.padLeftCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Left<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.padLeftDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Left<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.padLeftEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Left<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.padRightCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Right<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.padRightDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Right<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.padRightEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>pad<wbr/>Right<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.resizeCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>resize<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.resizeDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>resize<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.resizeEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>resize<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.reverseCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>reverse<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.reverseDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>reverse<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.reverseEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>reverse<wbr/>Encoder</span></a>
<a href="../functions/_solana_codecs_core.transformCodec.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>transform<wbr/>Codec</span></a>
<a href="../functions/_solana_codecs_core.transformDecoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>transform<wbr/>Decoder</span></a>
<a href="../functions/_solana_codecs_core.transformEncoder.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>transform<wbr/>Encoder</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:solanacodecs-core"><span>@solana/codecs-<wbr/>core</span></a><ul><li><a href="#md:composing-codecs"><span>Composing codecs</span></a></li><li><a href="#md:composing-encoders-and-decoders"><span>Composing encoders and decoders</span></a></li><li><a href="#md:combining-encoders-and-decoders"><span>Combining encoders and decoders</span></a></li><li><a href="#md:different-from-and-to-types"><span>Different <wbr/>From and <wbr/>To types</span></a></li><li><a href="#md:fixed-size-and-variable-size-codecs"><span>Fixed-<wbr/>size and variable-<wbr/>size codecs</span></a></li><li><a href="#md:creating-custom-codecs"><span>Creating custom codecs</span></a></li><li><a href="#md:transforming-codecs"><span>Transforming codecs</span></a></li><li><a href="#md:fixing-the-size-of-codecs"><span>Fixing the size of codecs</span></a></li><li><a href="#md:prefixing-codecs-with-their-size"><span>Prefixing codecs with their size</span></a></li><li><a href="#md:adding-sentinels-to-codecs"><span>Adding sentinels to codecs</span></a></li><li><a href="#md:adjusting-the-size-of-codecs"><span>Adjusting the size of codecs</span></a></li><li><a href="#md:offsetting-codecs"><span>Offsetting codecs</span></a></li><li><a href="#md:padding-codecs"><span>Padding codecs</span></a></li><li><a href="#md:reversing-codecs"><span>Reversing codecs</span></a></li><li><a href="#md:byte-helpers"><span>Byte helpers</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Solana JavaScript SDK</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
